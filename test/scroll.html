<!DOCTYPE html>
<html>
  <head>
    <style>
      html, body {
        margin: 0;
        padding: 0;
      }

      section {
        background-color: red;
        height: 50vh;
        margin-bottom: 20px;
      }

      script {
        display: block !important;
        white-space: pre;
        font-family: monospace;
      }
    </style>
  </head>
  <body>
    <section>
      <button class="js-play">Go Down</button>
    </section>
    <section class="js-height-target js-elastic-target">
      <button class="js-toggle-height">Animate Height</button>
    </section>
    <section></section>
    <section></section>
    <section></section>
    <section class="js-target">
      <button class="js-back">Go Up</button>
      <button class="js-elastic">Elastic Jump</button>
    </section>
    <section></section>
    <section></section>
    <section></section>
    <section></section>

    <script src="../dist/main.js"></script>
    <script>
      (function () {
        var { animate, handlers, easings } = ffffan
        var { ease, scroll, number, unit, object, updateObject, dom } = handlers
        var { easeInOutQuad, elasticInOut } = easings

        var $play = document.querySelector('.js-play')
        var $toggleHeight = document.querySelector('.js-toggle-height')
        var $back = document.querySelector('.js-back')
        var $elastic = document.querySelector('.js-elastic')
        var $elasticTarget = document.querySelector('.js-elastic-target')

        console.log(
          animate(
            number(0, 350),
            (res) => console.log('linear', res.number)
          )()
        )

        animate(
          ease(easeInOutQuad),
          unit(0, '350px'),
          (res) => console.log('easing', res.unit)
        )()

        const source = {
          height: 10,
          width: '200px'
        }

        animate(
          updateObject(source, { height: 500, width: 1000 }),
          (res) => console.log('target', res.object)
        )(100).finished.then(() => console.log('source', source))

        $play.addEventListener('click', function handleClick () {
          animate(ease(easeInOutQuad), scroll('.js-target', -10))(2000)
        })

        var jump = (ms = 2000) => animate(scroll(0))(ms)

        $back.addEventListener('click', function handleClick () {
          jump()
        })
        $elastic.addEventListener('click', function handleClick () {
          animate(ease(elasticInOut(2)), scroll($elasticTarget))(2000)
        })

        var isCollapsed = false
        $toggleHeight.addEventListener('click', function handleClick () {
          const $height = document.querySelector('.js-height-target')

          animate(
            ease(easeInOutQuad),
            dom(
              $height,
              {
                height: isCollapsed ? (window.innerHeight / 2) : 0,
                opacity: isCollapsed ? 1 : 0.1
              }
            )
          )()
          .finished
          .then(() => {
            isCollapsed = !isCollapsed
            if (!isCollapsed) $height.style.height = ''
          })
        })
      })()
    </script>
  </body>
</html>
