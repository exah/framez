<!DOCTYPE html>
<html>
  <head>
    <style>
      html,
      body {
        margin: 0;
        height: 100%;
        padding: 0 5px;
        background-color: red;
      }
      .section {
        background-color: rgba(75, 75, 75, .2);
        height: 100%;
        margin-top: 10px;
        margin-bottom: 10px;
        padding: 10px;
      }
      .section--transformed {
        height: 50%;
        transform:
          scale(.5, 1)
          translate(30px, 30%)
          rotate(5deg)
          skew(10deg, 30deg);
      }
    </style>
  </head>
  <body>
    <section class="section">
      <button class="js-play">Go Down</button>
    </section>
    <section class="section js-height-target js-elastic-target">
      <button class="js-toggle-height">Animate Height</button>
    </section>
    <section class="section section--transformed"></section>
    <section class="section"></section>
    <section class="section"></section>
    <section class="section js-target">
      <button class="js-back">Go Up</button>
      <button class="js-elastic">Elastic Jump</button>
    </section>
    <section class="section"></section>
    <section class="section"></section>
    <section class="section"></section>
    <section class="section"></section>

    <script src="../dist/a.umd.bundle.js"></script>
    <script>
      (function () {
        var {
          animate,
          easeInOut,
          elasticInOut,
          scroll,
          jump,
          number,
          unit,
          updateObject,
          updateStyles,
          withEase,
          getTransformStyle,
          objectToFunctions
        } = A

        var $play = document.querySelector('.js-play')
        var $toggleHeight = document.querySelector('.js-toggle-height')
        var $back = document.querySelector('.js-back')
        var $elastic = document.querySelector('.js-elastic')
        var $elasticTarget = document.querySelector('.js-elastic-target')
        var $transformed = document.querySelector('.section--transformed')

        const transforms = getTransformStyle($transformed)
        const transformsString = objectToFunctions(transforms)
        const orginal = window.getComputedStyle($transformed, null).transform
        let count = 0

        setInterval(() => {
          $transformed.style.transform = ((count + 1) % 2 === 0)
            ? transformsString
            : orginal

          count++
        }, 500)

        console.log(transforms)
        console.log(transformsString)

        animate(
          number(0, 350),
          (res) => console.log('linear', res.number)
        )()

        animate(
          withEase(easeInOut()),
          unit(0, '350px'),
          (res) => console.log('easing', res.unit)
        )()

        const source = {
          height: 10,
          width: '200px'
        }

        animate(
          updateObject(source, { height: 500, width: 1000 }),
          (res) => console.log('target', res.object)
        )(100).finished.then(() => console.log('source', source))

        $play.addEventListener('click', function handleClick () {
          animate(withEase(easeInOut()), scroll('.js-target', -10))(2000)
        })

        var elasticScroll = animate(
          withEase(elasticInOut(1)),
          scroll($elasticTarget)
        )

        $back.addEventListener('click', function handleClick () {
          jump(0, 2000)
        })
        $elastic.addEventListener('click', function handleClick () {
          elasticScroll(2000)
        })

        var isCollapsed = false
        $toggleHeight.addEventListener('click', function handleClick () {
          var $heightTarget = document.querySelector('.js-height-target')

          animate(
            withEase(easeInOut()),
            updateStyles($heightTarget, isCollapsed
              ? { height: window.innerHeight, opacity: 1 }
              : { height: 0, opacity: 0.1 }
            )
          )()
          .finished
          .then(() => {
            isCollapsed = !isCollapsed
            if (!isCollapsed) {
              $heightTarget.style.height = ''
              $heightTarget.style.opacity = ''
            }
          })
        })
      })()
    </script>
  </body>
</html>
